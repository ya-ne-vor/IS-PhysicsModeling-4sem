<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>ЗПЛ 6</title>
    <script src="../../library/plotly.min.js" ></script>
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="icon" href="../../images/atom_3767686.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    canvas {
    display: block;
    }

    <meta name="viewport" content="width=device-width, initial-scale=1.0, upgrade-insecure-requests" http-equiv="Content-Security-Policy">
    <!-- JavaScript and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
</head>
<body>


<!-- Navbar -->
<nav class="py-3 navbar navbar-expand-lg fixed-top auto-hiding-navbar">
    <div class="container">
        <a class="navbar-brand" href="../../index.html">
            <img class="logo" src="../../images/atom_3767686.png" href="../../index.html" /> ФОКиСТ
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link active" href="../../index.html">Главная</a></li>
                <li class="nav-item"><a class="nav-link" href="../../index.html#projects">Задания после лекции</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Семинары</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">Контакты</a></li>
            </ul>
        </div>
    </div>
</nav>
<!-- End Navbar -->



<!-- Hero section -->
<section id="hero1" style="margin-top: 150px;">
    <div class="container">
        <div class="row">
            <div class="col">
                <h1>Задание к лекции 6. Колебания. Вариант 1.</h1>
                <br>
                <h2> Моделирование. Затухающие колебания в LCR контуре.</h2> <br>

                <p class="card-text"><small class="text-muted">Открыто с: четверг, 21 марта 2024, 00:00<br>Срок сдачи: воскресенье, 31 марта 2024, 00:00</small></p>
            </div>
        </div>
    </div>
    <br> <br><br>
    <div class="container">
        <h3>Условие задачи</h3>
        <strong>Входные параметры:</strong> индуктивность, сопротивление, емкость конденсатора.  <br>
        <strong>Итоговый вид модели:</strong> зависимость силы заряда, силы тока и напряжения от
        времени.

    </div> <br> <br>
    <div class="container">
        <br>
        <h5>Визуализация</h5> <br>

        <table>
            <tr>
                <td>w<sub>0</sub></td>
                <td><p id="w0_data">null</p></td>
            </tr>

            <tr>
                <td>Beta</td>
                <td><p id="beta_data">null</p></td>
            </tr>

            <tr>
                <td>R<sub>кр</sub></td>
                <td><p id="r_crit_data">null</p></td>
            </tr>

            <tr>
                <td> &nbsp; </td>
            </tr>
            <tr>
                <td><label for="charge_strength">Начальная сила заряда, q<sub>0</sub> (Кл):</label></td>
                <td><input type="number" id="charge_strength" value="1"></td>
            </tr>
            <tr>
                <td><label for="inductance">Индуктивность, L (Гн):</label></td>
                <td><input type="number" id="inductance" value="20"></td>
            </tr>
            <tr>
                <td><label for="resistance">Сопротивление, R (Ом):</label></td>
                <td><input type="number" id="resistance" value="20"></td>
            </tr>
            <tr>
                <td><label for="capacity">Емкость конденсатора, C (Ф):</label></td>
                <td><input type="number" id="capacity" value="0.001"></td>
            </tr>
            <tr>
                <td> &nbsp; </td>
            </tr>
            <tr>
                <td><label for="maxTime">Время, t (с)</label></td>
                <td><input type="number" id="maxTime" value="10"></td>
            </tr>
            <tr>
                <td><label for="dotCount">Количество точек на графике:</label></td>
                <td><input type="number" id="dotCount" value="500"></td>
            </tr>
            <tr>
                <td> &nbsp; </td>
            </tr>

            <tr>
                <td> &nbsp; </td>
            </tr>


            <tr>
                <td></td>
                <td><button onclick="redraw()">Готово!</button></td>
            </tr>

            <tr>
                <td> &nbsp; </td>
            </tr>
            <tr>
                <td> &nbsp; </td>
            </tr>

        </table>

        <div class="row align-items-center">
            <div class="col">
                <div class="card mb-3">
                    <div class="card-body">
                        <canvas id="q_t" width="450" height="300"></canvas>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card mb-3">
                    <div class="card-body">
                        <canvas id="I_t" width="450" height="300"></canvas>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card mb-3">
                    <div class="card-body">
                        <canvas id="U_t" width="450" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>


        <script>
            function w_0(L, C) {
                return 1 / Math.sqrt(L * C);
            }
            function beta(L, R) {
                return R / (2 * L);
            }
            function w(L, C, R) {
                w0_2 = w_0(L, C) * w_0(L, C);
                beta_2 = beta(L, R) * beta(L, R);
                return Math.sqrt(w0_2 - beta_2);
            }
            function getQ(q0, L, C, R, t) {
                return q0 * Math.exp(-1 * beta(L, R) * t) * Math.cos(w(L, C, R) * t);
            }
            function getI(q0, L, C, R, t) {
                return -1 * q0 * Math.exp(-1 * beta(L, R) * t) * (beta(L, R) * Math.cos(w(L, C, R) * t) + w(L, C, R) * Math.sin(w(L, C, R) * t)
                );
            }

            function getU(q0, L, C, R, t) {
                return (q0 / C) * Math.exp(-1 * beta(L, R) * t) * Math.cos(w(L, C, R) * t);
            }

            function getR_cr(L, C) {
                return 2 * Math.sqrt(L / C);
            }

            function redraw() {
                setupHelpers();
                updateChart();
            }


            function updateChart() {
                const q0 = parseFloat(document.getElementById('charge_strength').value);

                const inductance = parseFloat(document.getElementById('inductance').value);
                const resistance = parseFloat(document.getElementById('resistance').value);
                const capacity = parseFloat(document.getElementById('capacity').value);

                const dotCount = parseInt(document.getElementById('dotCount').value);
                const maxTime = parseFloat(document.getElementById('maxTime').value);

                const messageValidation = validateInput(inductance, resistance, capacity, dotCount, maxTime);
                if (messageValidation) {
                    alert(message);
                    return;
                }

                setupHelpers(inductance, capacity, resistance)

                const contextU = document.getElementById('U_t').getContext('2d');


                const contextQ = document.getElementById('q_t').getContext('2d');

                const contextI = document.getElementById('I_t').getContext('2d');


                const Values_t = [];
                for (let t = 0; t <= maxTime; t += (maxTime / dotCount)) {
                    Values_t.push(toPrecision(t, 3));
                }


                const qValues = Values_t.map(t => getQ(q0, inductance, capacity, resistance, t));

                const iValues = Values_t.map(t => getI(q0, inductance, capacity, resistance, t));

                const Values_u = Values_t.map(t => getU(q0, inductance, capacity, resistance, t));


                clearCanvases();

                this.q_t = new Chart(contextQ, {
                    type: 'line',
                    data: {
                        labels: Values_t,
                        datasets: [{
                            label: 'Величина заряда',
                            data: qValues,
                            backgroundColor: 'rgb(245,200,255)',
                            borderColor: 'rgb(145,0,166)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Время t (с)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Заряд (Кл)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Зависимость силы заряда от времени'
                            }
                        }
                    }
                });

                this.I_t = new Chart(contextI, {
                    type: 'line',
                    data: {
                        labels: Values_t,
                        datasets: [{
                            label: 'Сила тока',
                            data: iValues,
                            backgroundColor: 'rgb(255,246,152)',
                            borderColor: 'rgb(255,36,36)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Время t (с)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Сила тока I (A)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Зависимость силы тока от времени'
                            }
                        }
                    }
                });

                this.U_t = new Chart(contextU, {
                    type: 'line',
                    data: {
                        labels: Values_t,
                        datasets: [{
                            label: 'Напряжение',
                            data: Values_u,
                            backgroundColor: 'rgb(0,197,26)',
                            borderColor: 'rgb(0,110,0)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Время t (с)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Напряжение (В)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Зависимость напряжения от времени'
                            }
                        }
                    }
                });
            }


            updateChart();
            window.onresize = updateChart;

            function validateInput(inductance, resistance, capacity, dotCount, maxTime) {
                errors = "";

                if (inductance <= 0) {
                    errors += "Индуктивность должна быть  больше 0! \n"
                }

                if (maxTime <= 0) {
                    errors += "Значение времени должно быть больше 0 \n"
                }

                if (capacity <= 0) {
                    errors += "Емкость конденсатора должна быть больше 0! \n"
                }

                if (dotCount <= 0) {
                    errors += "Число точек должно быть больше 0 \n"
                }


                // на сопротивление
                if (resistance > getR_cr(inductance, capacity)) {
                    errors += "Сопротивление превысило критическое значение, поэтому и периодических колебаний не будет \n"
                }

                if (resistance < 0) {
                    errors += "Сопротивление должно быть положительным! \n"
                }

                return errors;
            }

            function clearCanvases() {
                if (this.q_t instanceof Chart) {
                    this.q_t.destroy();
                }

                if (this.I_t instanceof Chart) {
                    this.I_t.destroy();
                }
                if (this.U_t instanceof Chart) {
                    this.U_t.destroy();
                }
            }

            function setupHelpers() {
                const L = parseFloat(document.getElementById('inductance').value);


                const R = parseFloat(document.getElementById('resistance').value);

                const C = parseFloat(document.getElementById('capacity').value);

                document.getElementById('beta_data').innerText = beta(L, R);


                document.getElementById('w0_data').innerText = w_0(L, C, R);

                document.getElementById('r_crit_data').innerText = getR_cr(L, C);
            }

            function toPrecision(value, digits) {
                const newValue = Math.round((value + Number.EPSILON) * Math.pow(10, digits)) / Math.pow(10, digits);
                return Math.round((value + Number.EPSILON) * Math.pow(10, digits)) / Math.pow(10, digits);
            }
        </script>

    </div>
</section>
<!-- End Hero section -->



<!-- Contact section -->
<section id="contact" style="margin-top: 50px;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col">
                <h1>Контакты</h1>
                <h5>Гонос Анна M3204</h5>
                <p>ITMO University  |  Software Engineering</p>

            </div>
        </div>
    </div>
    <a href="https://github.com/AnnaGonos/IS-PhysicsModeling-4sem" target="_blank" class="mr-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-github text-white" viewBox="0 0 16 16" >
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
        </svg>
    </a>

    <a href="https://t.me/gonosanna" target="_blank" class="mr-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-telegram text-white" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.287 5.906q-1.168.486-4.666 2.01-.567.225-.595.442c-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294q.39.01.868-.32 3.269-2.206 3.374-2.23c.05-.012.12-.026.166.016s.042.12.037.141c-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8 8 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629q.14.092.27.187c.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.4 1.4 0 0 0-.013-.315.34.34 0 0 0-.114-.217.53.53 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09"/>
        </svg>
    </a>

</section>
<!-- End Contact section -->


</body>
</html>














